# 소스코드 분석 기반 PM 업무 자동화 플랫폼 - 기획서

## 1. 프로젝트 개요

### 1-1. 프로젝트 명
- 앱/웹 명칭: 미정

### 1-2. 문제 정의
- PM이 귀찮아하는 진행도 파악 업무의 비효율성
- 소스코드 기반 진행도 분석의 수동 작업 부담
- GitHub 저장소 정보와 프로젝트 관리 도구 간 단절

### 1-3. 해결 방향
- **소스코드 기반 진행도 자동 분석**: GitHub 저장소 연동으로 커밋/이슈/브랜치 정보 자동 수집
- **Task-커밋 연동**: Task 완료를 커밋 및 이슈 상태로 자동 확인
- **AI 기반 제안**: 소스코드 분석을 통한 리팩토링 필요성 및 새 Task 제안

### 1-4. 개발 목표 (2주 프로토타입)
- 팀 기반 프로젝트 관리 기본 기능
- GitHub 연동 및 진행도 분석
- 최소한의 AI 기반 Task 제안

---

## 2. 시스템 설계

### 2-1. 데이터베이스 설계

#### 테이블 구조

**User** (PK: id)
- email, passwordHash, name, createdAt, updatedAt

**Team** (PK: id)
- name, teamCode, passwordHash, ownerId, createdAt, updatedAt

**TeamUser** (PK: id)
- teamId (FK → Team.id), userId (FK → User.id), joinedAt

**Project** (PK: id)
- userId (FK → User.id), teamId (FK → Team.id)
- title, description, githubRepo, githubToken(선택, Private 저장소용)
- status, createdAt, updatedAt

**Task** (PK: id)
- projectId (FK → Project.id), assignedUserId (FK → User.id)
- title, description, status, githubIssueNumber(선택), dueDate
- createdAt, updatedAt

**ProjectCommit** (PK: id)
- projectId (FK → Project.id), taskId (FK → Task.id, 선택)
- commitSha, commitMessage, author, commitDate
- linesAdded, linesDeleted, filesChanged

**AI_Log** (PK: id)
- userId (FK → User.id), taskId (FK → Task.id)
- type, input, output, feedback, createdAt

### 2-2. API 설계

#### User API
- POST `/api/user/login` - 로그인
- POST `/api/user/logout` - 로그아웃
- POST `/api/user/join` - 회원가입
- GET `/api/user/duplicate` - 아이디 중복 확인
- GET `/api/user/info` - 회원정보 조회

#### Team API
- POST `/api/team/create` - 팀 생성 (팀 코드 자동 생성)
- POST `/api/team/join` - 팀 참여 (팀 코드 + 비밀번호)
- GET `/api/team/info` - 팀 정보 및 멤버 목록 조회

#### Project API
- POST `/api/project/create` - 프로젝트 생성
- GET `/api/project/info` - 프로젝트 목록/상세 조회
- POST `/api/project/connect-github` - GitHub 저장소 연결

#### Task API
- POST `/api/task/create` - 작업 생성
- GET `/api/task/info` - 작업 목록 조회 (projectId 필터)
- PATCH `/api/task/update` - 작업 수정/상태 변경
- PATCH `/api/task/assign` - 작업 할당

#### GitHub API
- POST `/api/github/sync/:projectId` - 프로젝트 정보 수동 동기화 (커밋/이슈/브랜치)
- GET `/api/github/commits/:projectId` - 커밋 목록 조회
- GET `/api/github/issues/:projectId` - 이슈 목록 조회
- GET `/api/github/branches/:projectId` - 브랜치 목록 조회

#### Progress API
- GET `/api/progress/project/:projectId` - 프로젝트 진행도 조회

#### AI API
- POST `/api/ai/task-suggestion` - 코드 분석 기반 새 Task 제안

### 2-3. 화면 설계

#### 주요 화면
1. **로그인/회원가입 화면**
2. **팀 생성/참여 화면** - 팀 코드 + 비밀번호 입력
3. **프로젝트 목록 화면**
4. **프로젝트 상세 화면**
   - 진행도 대시보드 (프로젝트 진행도, 코드 기반 진행도)
   - GitHub 저장소 연결 설정
   - 커밋/이슈/브랜치 정보 표시
5. **프로젝트 생성 화면** - GitHub 저장소 URL 입력
6. **Task 목록 화면** (프로젝트별)
7. **Task 생성/수정 화면** - GitHub 이슈 번호 연결 가능
8. **진행도 시각화** - 간단한 차트 또는 프로그레스 바

---

## 3. 핵심 기능

### 3-1. GitHub 연동
- **Public 저장소**: URL만으로 커밋/이슈/브랜치 정보 조회 (GitHub REST API 사용)
- **Private 저장소**: Personal Access Token 입력 시 접근 가능
- **동기화**: 수동 동기화 버튼 또는 주기적 자동 동기화

### 3-2. 진행도 분석
- **프로젝트 진행도**: 완료된 Task 수 / 전체 Task 수
- **코드 기반 진행도**: 커밋 수, 라인 변경량, 브랜치 수, 이슈 완료율 기반 계산
- **팀원별 기여도**: 커밋 수, 이슈 할당/완료 수 집계

### 3-3. Task-이슈 연동
- Task 생성 시 GitHub 이슈 번호 연결 가능
- 이슈가 닫히면 해당 Task 자동 완료 상태 업데이트

### 3-4. AI 기반 제안
- **새로운 Task 제안**: 코드 분석 기반으로 제안되는 Task 목록 (우선순위 포함)
- **리팩토링 제안**: 시간 여유 시 추가 예정

---

## 4. 기술 스택

### 백엔드
- Node.js + Express
- SQLite (개발)
- JWT (인증)
- `@octokit/rest` - GitHub API 클라이언트

### AI 백엔드
- Python + Flask
- OpenAI API (LLM)
- `PyGithub` - GitHub API Python 클라이언트

### 프론트엔드
- React 19
- Vite
- Morpheus (하이브리드 앱)

---

## 5. 개발 일정 (2주 프로토타입)

### Week 1: 백엔드 핵심 기능
- Day 1-2: 데이터 모델 및 기본 API (User, Team, Project, Task)
- Day 3-4: GitHub 연동 및 진행도 분석
- Day 5: AI 백엔드 최소 기능

### Week 2: 프론트엔드 및 통합
- Day 1-2: 기본 화면 구조
- Day 3-4: 프로젝트 및 Task 관리 화면
- Day 5: 통합 테스트 및 시연 준비

---

## 6. 시연 시나리오

1. 사용자 로그인
2. 팀 생성 (팀 코드 자동 생성)
3. 프로젝트 생성 및 GitHub 저장소 연결 (Public 저장소 URL 입력)
4. GitHub 정보 동기화 (커밋/이슈/브랜치 정보 조회)
5. Task 생성 및 팀원 할당 (GitHub 이슈 번호 연결)
6. 진행도 대시보드 확인 (프로젝트 진행도, 코드 기반 진행도 시각화)
7. AI 기반 Task 제안 확인

---

## 7. 이슈 및 고려사항

### 7-1. GitHub API Rate Limit
- Public 저장소: 인증 없이 60 requests/hour
- Private 저장소: 인증 시 5,000 requests/hour
- 대응: 효율적인 캐싱 및 동기화 전략 필요

### 7-2. 개발 단계 API 비용
- OpenAI API: 무료 tier 또는 저렴한 유료 tier 활용
- 프로토타입 단계에서는 최소한의 API 호출로 제한

### 7-3. 데이터 보안
- GitHub Token 암호화 저장
- JWT 기반 인증
